<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Platam CRM Pro - Apollo Intelligence</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #6366f1;
            --primary-light: #818cf8;
            --secondary: #ec4899;
            --bg-dark: #0f172a;
            --card-bg: rgba(30, 41, 59, 0.7);
            --text-main: #f8fafc;
            --text-dim: #94a3b8;
            --glass: rgba(255, 255, 255, 0.03);
            --border: rgba(255, 255, 255, 0.1);
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Outfit', sans-serif;
        }

        body {
            background-color: var(--bg-dark);
            background-image:
                radial-gradient(at 0% 0%, rgba(99, 102, 241, 0.15) 0px, transparent 50%),
                radial-gradient(at 100% 100%, rgba(236, 72, 153, 0.1) 0px, transparent 50%);
            color: var(--text-main);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .layout {
            display: grid;
            grid-template-columns: 260px 1fr;
            min-height: 100vh;
        }

        /* Sidebar */
        aside {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(20px);
            border-right: 1px solid var(--border);
            padding: 2rem 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 2rem;
            position: sticky;
            top: 0;
            height: 100vh;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(to right, #6366f1, #ec4899);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        nav ul {
            list-style: none;
        }

        nav li {
            padding: 0.8rem 1rem;
            border-radius: 12px;
            color: var(--text-dim);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        nav li:hover {
            background: var(--glass);
            color: var(--text-main);
            transform: translateX(5px);
        }

        nav li.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
        }

        /* Main Content */
        main {
            padding: 2.5rem;
            overflow-y: auto;
        }

        .view-section {
            display: none;
            animation: slideIn 0.4s ease-out forwards;
        }

        .view-section.active {
            display: block;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(15px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2.5rem;
        }

        .search-box {
            background: var(--glass);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 0.6rem 1rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            width: 350px;
        }

        .search-box input {
            background: transparent;
            border: none;
            color: white;
            outline: none;
            width: 100%;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2.5rem;
        }

        .stat-card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border);
            padding: 1.5rem;
            border-radius: 24px;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
        }

        /* Table & Cards */
        .card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 2rem;
            margin-bottom: 1.5rem;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .filter-tabs {
            display: flex;
            gap: 0.5rem;
            background: var(--glass);
            padding: 0.4rem;
            border-radius: 14px;
        }

        .filter-btn {
            padding: 0.5rem 1.2rem;
            border-radius: 10px;
            border: none;
            background: transparent;
            color: var(--text-dim);
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
        }

        .filter-btn.active {
            background: var(--card-bg);
            color: white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            text-align: left;
            padding: 1.2rem 1rem;
            color: var(--text-dim);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-bottom: 1px solid var(--border);
        }

        td {
            padding: 1.2rem 1rem;
            border-bottom: 1px solid var(--border);
        }

        tr:hover td {
            background: rgba(255, 255, 255, 0.02);
        }

        .status-pill {
            padding: 0.4rem 1rem;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: capitalize;
        }

        .status-agendados {
            background: rgba(16, 185, 129, 0.15);
            color: #10b981;
        }

        .status-interesados {
            background: rgba(99, 102, 241, 0.15);
            color: #818cf8;
        }

        .status-en_secuencia {
            background: rgba(59, 130, 246, 0.15);
            color: #3b82f6;
        }

        .status-rechazados {
            background: rgba(239, 68, 68, 0.15);
            color: #ef4444;
        }

        .status-nuevos {
            background: rgba(148, 163, 184, 0.15);
            color: #94a3b8;
        }

        .btn-sync {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 14px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            transition: all 0.3s;
        }

        .btn-sync:hover {
            opacity: 0.9;
            transform: scale(1.02);
        }

        .btn-sync.syncing svg {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        .activity-feed {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .activity-card {
            display: flex;
            gap: 1.5rem;
            padding: 1.5rem;
            background: var(--glass);
            border: 1px solid var(--border);
            border-radius: 20px;
        }

        /* Charts */
        .charts-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-top: 2rem;
        }
    </style>
</head>

<body>
    <div class="layout">
        <aside>
            <div class="logo">
                <span>‚ö°</span> PLATAM PRO
            </div>
            <nav>
                <ul>
                    <li class="active" onclick="switchView('dashboard')"><span>üè†</span> Dashboard</li>
                    <li onclick="switchView('prospects')"><span>üë•</span> Prospectos</li>
                    <li onclick="switchView('activity')"><span>üîî</span> Actividad</li>
                    <li onclick="switchView('campaigns')"><span>üìß</span> Campa√±as</li>
                </ul>
            </nav>
            <div style="margin-top: auto;">
                <button class="btn-sync" onclick="startSync(this)">
                    <svg id="syncIcon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2">
                        <path d="M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15">
                        </path>
                    </svg>
                    Sincronizar Apollo
                </button>
                <div class="card" style="padding: 1rem; margin-top: 1.5rem; background: var(--glass);">
                    <p style="font-size: 0.75rem; color: var(--text-dim);">√öltima Actualizaci√≥n</p>
                    <p id="topLastSync" style="font-size: 0.85rem; font-weight: 600;">Hace 2 min</p>
                </div>
            </div>
        </aside>

        <main>
            <!-- View: Dashboard -->
            <section id="view-dashboard" class="view-section active">
                <header>
                    <div>
                        <h1>Dashboard de Control</h1>
                        <p style="color: var(--text-dim);">Resumen de inteligencia comercial para Santiago Mu√±oz.</p>
                    </div>
                    <div class="search-box">
                        <span>üîç</span>
                        <input type="text" placeholder="Buscar prospectos o campa√±as..."
                            onkeyup="globalSearch(this.value)">
                    </div>
                </header>

                <div class="stats-grid" id="statsGrid">
                    <!-- Group 1: Emails -->
                    <div class="stat-card">
                        <div class="stat-label">1. Emails</div>
                        <div class="stat-value" id="email-perf">--</div>
                        <div
                            style="font-size: 0.8rem; margin-top: 0.5rem; display: flex; flex-direction: column; gap: 4px;">
                            <span style="color: var(--text-dim)">1.1 Enviados: <strong id="email-sent"
                                    style="color: var(--text-main)">--</strong></span>
                            <span style="color: var(--text-dim)">1.2 Contestados: <strong id="email-replied"
                                    style="color: var(--success)">--</strong></span>
                            <span style="color: var(--text-dim)">1.3 Realizados: <strong id="email-total"
                                    style="color: var(--primary-light)">--</strong></span>
                        </div>
                    </div>

                    <!-- Group 2: Llamadas -->
                    <div class="stat-card">
                        <div class="stat-label">2. Llamadas</div>
                        <div class="stat-value" id="calls-realized">--</div>
                        <div
                            style="font-size: 0.8rem; margin-top: 0.5rem; display: flex; flex-direction: column; gap: 4px;">
                            <span style="color: var(--text-dim)">2.1 Realizadas: <strong id="calls-perf"
                                    style="color: var(--text-main)">--</strong></span>
                            <span style="color: var(--text-dim)">2.2 Contestadas: <strong id="calls-answered"
                                    style="color: var(--primary-light)">--</strong></span>
                            <span style="color: var(--text-dim)">2.3 Agendadas: <strong id="calls-meetings"
                                    style="color: var(--success)">--</strong></span>
                        </div>
                    </div>

                    <!-- Group 3: LinkedIn -->
                    <div class="stat-card">
                        <div class="stat-label">3. LinkedIn</div>
                        <div class="stat-value" id="li-sent">--</div>
                        <div
                            style="font-size: 0.8rem; margin-top: 0.5rem; display: flex; flex-direction: column; gap: 4px;">
                            <span style="color: var(--text-dim)">3.1 Enviado: <strong id="li-perf"
                                    style="color: var(--text-main)">--</strong></span>
                            <span style="color: var(--text-dim)">3.2 Contestado: <strong id="li-replied"
                                    style="color: var(--primary-light)">--</strong></span>
                        </div>
                    </div>

                    <!-- Group 4: Otros -->
                    <div class="stat-card">
                        <div class="stat-label">4. Otros Canales</div>
                        <div class="stat-value" id="other-sent">--</div>
                        <div
                            style="font-size: 0.8rem; margin-top: 0.5rem; display: flex; flex-direction: column; gap: 4px;">
                            <span style="color: var(--text-dim)">4.1 Enviado: <strong id="other-perf"
                                    style="color: var(--text-main)">--</strong></span>
                            <span style="color: var(--text-dim)">4.2 Contestado: <strong id="other-replied"
                                    style="color: var(--primary-light)">--</strong></span>
                        </div>
                    </div>
                </div>

                <div class="dashboard-content" style="grid-template-columns: 1.5fr 1fr;">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Distribuci√≥n por Pipeline</h3>
                        </div>
                        <canvas id="pipelineChart" height="200"></canvas>
                    </div>
                    <div class="card">
                        <h3 class="card-title">Actividad Reciente</h3>
                        <div id="mini-activity" class="activity-feed">
                            <!-- JS Inject -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- View: Prospects -->
            <section id="view-prospects" class="view-section">
                <header>
                    <h1>Base de Prospectos</h1>
                    <div class="filter-tabs" id="statusFilter">
                        <button class="filter-btn active" onclick="filterBy('ALL')">Todos</button>
                        <button class="filter-btn" onclick="filterBy('INTERESADOS')">Interesados</button>
                        <button class="filter-btn" onclick="filterBy('AGENDADOS')">Agendados</button>
                        <button class="filter-btn" onclick="filterBy('EN_SECUENCIA')">En Secuencia</button>
                        <button class="filter-btn" onclick="filterBy('RECHAZADOS')">No Interesados</button>
                    </div>
                </header>

                <div class="card">
                    <table>
                        <thead>
                            <tr>
                                <th>Nombre Completo</th>
                                <th>Empresa / Cuenta</th>
                                <th>Email</th>
                                <th>Campa√±a Actual</th>
                                <th>Step</th>
                                <th>Estado Apollo</th>
                            </tr>
                        </thead>
                        <tbody id="fullContactTable">
                            <!-- JS Inject -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- View: Activity -->
            <section id="view-activity" class="view-section">
                <h1>Notificaciones de Apollo</h1>
                <div id="fullActivityFeed" class="activity-feed" style="margin-top: 2rem;">
                    <!-- JS Inject -->
                </div>
            </section>
        </main>
    </div>

    <script>
        let rawData = null;
        let pipelineChart = null;

        document.addEventListener('DOMContentLoaded', () => {
            loadData();
        });

        function loadData() {
            rawData = {"timestamp": "2026-01-16T20:41:33.352094", "kpis_v2": {"email": {"sent": 397, "replied": 0, "total": 397}, "calls": {"realized": 60, "answered": 31, "meetings": 17}, "linkedin": {"sent": 0, "replied": 0}, "other": {"sent": 0, "replied": 0}}, "pipeline": {"NUEVOS": [{"name": "Jackeline Ortega", "company": "Megapets", "email": "megaofertasec@gmail.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Compa\u00f1ia Dsierra S.A.S.", "email": "jarenas@dsierra.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "CARVAL", "email": "freddy.martinez@carval.com.co", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Laboratorios Legrand S.A", "email": "striana@laboratorioslegrand.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LINKEDIN (DIA 4)"}, {"name": "Sin Nombre", "company": "F\u00e1brica de Licores y Alcoholes de Antioquia -EICE-", "email": "diana.diaz@fla.com.co", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Prosalon Distribuciones", "email": "liliana.chamorro@prosalon.com.co", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Pintuco", "email": "ricardo.aguirre@pintuco.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Alianza Team\u00ae", "email": "jguerrero@alianzateam.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Abbott Laboratories - Lafrancol S.A.S", "email": "carlos.riano@abbott.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Central Cervecera de Colombia", "email": "jorge.caicedo@centralcervecera.com.co", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Alimentos Polar", "email": "laurindo.fernandez@empresas-polar.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Levapan", "email": "jonathan.cuestas@levapan.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Novacolor S.A.S", "email": "felipe@novacolor.com.co", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Gelco International", "email": "manuela.pinilla@gelcointernational.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Productos Ramo S.A.", "email": "andres.sanchez@ramo.com.co", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Sempertex SAS", "email": "enriquea@sempertex.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Abbott Laboratories - Lafrancol S.A.S", "email": "wenceslao.giraldo@abbott.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Solla S.A.", "email": "mramirez@solla.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Levapan", "email": "luisa.gomez@levapan.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Italcol Cuenta Oficial", "email": "claudialascano@italcol.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Eterna S.A.", "email": "cristian.gonzalez@eternaplc.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Productos Ramo S.A.", "email": "carola.mora@ramo.com.co", "apollo_status": "scheduled", "current_campaign": "", "current_step": "SIN GESTION"}, {"name": "Sin Nombre", "company": "Belcorp", "email": "gianellaromero@belcorp.biz", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Coolechera", "email": "canal.institucional@coolechera.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Comercializadora Internacional Eslop Sas", "email": "contabilidad@eslop.co", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "C.I. Global Multi Commodities S.A.S", "email": "gerencia@glomco.com.co", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Osorio Pineda", "company": "Comercializadora Internacional Infinita Prosperidad Minera Sas", "email": "notificacionesagd@antioquiagold.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Landgreen S.A.S.", "email": "saslandgreen@gmail.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Ci Jsw Corporation S.A.S", "email": "cumplimiento@jswcorporation.sas", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "C.I. Gestion El Real S.A.S.", "email": "gerencia@gestionelreal.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Moreno Corporation S.A.S.", "email": "morenocorporation2019@gmail.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Carmen Sierra", "company": "Comercializadora Internacional Eleven Corporation S.A.S", "email": "gerencia@elevencorporation.co", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Seguanes Benitez Giovanis Stella", "email": "stellaseguanes@gmail.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Atlas Metals S.A.S.", "email": "metalsatlassas@gmail.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "C.I. Importcaribe S.A.S.", "email": "gerencia.importcaribe@gmail.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Sociedad de Comercializacion Internacional de Negocios Naranja y Tecnologia Financiera S.A.S Bic", "email": "contabilidad1@ciorange.com.co", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Gjh Elemental S.A.S.", "email": "gjhelemental.sas@gmail.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Inversiones El Malecon S.A.S.", "email": "inversioneselmuelle02@gmail.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Inversiones La Estrella S&L S.A.S.", "email": "inversioneslaestrellasas@gmail.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Aristizabal Osorno Mauricio Andres", "email": "maao3182@gmail.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Origen Oro Artesanal S.A.S.", "email": "gerencia@origenartesanal.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Orozco Fidel", "email": "compradeorofo@gmail.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Suserquia Mazo Tatiana Andrea", "email": "inversioneseye2021@gmail.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "SIN GESTION"}, {"name": "Sin Nombre", "company": "Grupo de Inversiones L.A Sas", "email": "grupodeinversionesla@gmail.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "SIN GESTION"}, {"name": "Sin Nombre", "company": "Comercializadora El Dorado Taraza S.A.S", "email": "doradotaraza@gmail.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "SIN GESTION"}, {"name": "Sin Nombre", "company": "Sg Milenario S.A.S", "email": "contabilidad@sgmilenario.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "SIN GESTION"}, {"name": "Sin Nombre", "company": "Inversiones Cz3 S.A.S.", "email": "inverc23@gmail.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "SIN GESTION"}, {"name": "Sin Nombre", "company": "Inversiones Jehm S.A.S.", "email": "inversionesjehm@gmail.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "SIN GESTION"}, {"name": "Sin Nombre", "company": "Agustin Cabrera Juan Camilo", "email": "juan_kmilo1989@hotmail.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "SIN GESTION"}, {"name": "Sin Nombre", "company": "Diaz Diaz Jorge Mario", "email": "jodiaz21@hotmail.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "SIN GESTION"}], "EN_SECUENCIA": [], "INTERESADOS": [{"name": "Jeimmy Oviedo", "company": "Aceites Escenciales Aromas Colombianos", "email": "jeimmy.oviedo@gmail.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Carlos Rendon", "company": "Leche Pal Pelo (Grupo Euro Belleza)", "email": "crendon33@hotmail.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 2 (DIA 6)"}, {"name": "Nelsy Yanneth Nieto Ramirez", "company": "Sumicolor", "email": "nnieto@sumicolor.com.co", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Fuller Pinto", "email": "director.ventas@fullerpinto.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "CampoReal", "email": "lucy.silva@camporeal.co", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Laboratorios Smart S.A.S", "email": "atorres@laboratoriossmart.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Talsa", "email": "currea@citalsa.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Productos Vicky S.A.S", "email": "pedro.jerez@productoslavictoria.co", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Medivelius Farmac\u00e9utica", "email": "esteban.arteaga@medivelius.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Megalabs Colombia", "email": "mladino@megalabs.com.co", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Dispapeles", "email": "oscar.uribe@dispapeles.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "JGB S.A.", "email": "caherrera@jgb.com.co", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Nutrium S.A.S.", "email": "camilo.jaramillo@nutrium.co", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Barbaran Vargas Jose Eduardo", "email": "barbaranvargasj@gmail.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Industrias Dofi Sas", "email": "contabilidad2@moduofi.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Chica Mazo Santiago de Jesus", "email": "menalfredo2@gmail.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Alvarez Correa Wilmer Duban", "email": "duvan28alvarez@gmail.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Inversiones Armi S.A.S.", "email": "inversionesarmisas@gmail.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Inversiones El Rey J.S Sas", "email": "inversioneselrey12@gmail.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Alvarez Correa Juan David", "email": "juandalvarez20@gmail.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "LLAMADA 1 (DIA 3)"}, {"name": "Sin Nombre", "company": "Comercializadora Internacional Cyen S.A.S", "email": "cicyensas@gmail.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "SIN GESTION"}, {"name": "Sin Nombre", "company": "Grasberg S.A.S.", "email": "grasbergsas@gmail.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "SIN GESTION"}, {"name": "Sin Nombre", "company": "Grupo Empresarial La Dolores S.A.S.", "email": "administrativo@grupoeld.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "SIN GESTION"}, {"name": "Sin Nombre", "company": "Maximuebles Jc Sas", "email": "maximueblescontabilidad@hotmail.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "SIN GESTION"}, {"name": "Sin Nombre", "company": "Mercantil Comercial de Colombia S.A.S.", "email": "mercantilcomercialdecolombia@gmail.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "SIN GESTION"}, {"name": "Yacid Fernando Orozco Bedoya", "company": "Distribuidora de belleza Guadalupe", "email": "distriguadalupe@hotmail.com", "apollo_status": "NO INTERESADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "COMERCIALIZADORA SUPER REY SAS", "company": "SUPER REY DE LOS REMATES", "email": "vanesa.ramireselrey@gmail.com", "apollo_status": "NO INTERESADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "Ehilen Ar\u00e9valo Quintero", "company": "Cacharrer\u00eda Fredy Andr\u00e9", "email": "eilenarevalo787@gmail.com", "apollo_status": "NO INTERESADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "LUZ ADRIANA BUITRAGO ARCILA", "company": "Tienda de belleza adri", "email": "adrianab0412@hotmail.com", "apollo_status": "NO INTERESADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "MARTHA PATRICIA ZAMBRANO CLAVIJO", "company": "Distribuidora cabello riso", "email": "alejandra_0088@hotmail.com", "apollo_status": "NO INTERESADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "ORLANDO JIMENEZ SANCHEZ", "company": "Muebles oddy", "email": "mueblesoddy@gmail.com", "apollo_status": "INTERESADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "LUISA FERNANDA ALFEREZ TRIVI\u00d1O", "company": "SURTI SALON'S DISTRIBUIDOR", "email": "luisita_1904@hotmail.com", "apollo_status": "NO INTERESADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "Carmen Alicia Bastidas Espa\u00f1a", "company": "Fit Comercial", "email": "alicia.bastidas13e@gmail.com", "apollo_status": "INTERESADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "JAMES RIASCOS GONZALEZ", "company": "Muebleria Kairos", "email": "jamesriascosgonzalez@gmail.com", "apollo_status": "NO INTERESADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "SANDRA PATRICIA RODRIGUEZ CORTEZ", "company": "House confort", "email": "patriciacor0324@gmail.com", "apollo_status": "NO INTERESADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "NAZARETH PE\u00d1AFIEL MU\u00d1OZ", "company": "El nogal", "email": "nazitarafa@gmail.com", "apollo_status": "NO INTERESADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "ALVARO LONDO\u00d1O ARBELAEZ", "company": "Muebleria kelfer sas", "email": "alvarolondono64@gmail.com", "apollo_status": "INTERESADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "ROSAURA BATALLA PRADO", "company": "Don Muebles", "email": "donmuebles@hotmail.com", "apollo_status": "INTERESADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "OSWALDO JOSE NIAMPIRA GUTIERREZ", "company": "DROGUERIAS ULTRA", "email": "niampira31@gmail.com", "apollo_status": "INTERESADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "ELSY ESMERALDA PULGARIN NARANJO", "company": "Tienda de belleza fmzp", "email": "alexzapata0987@gmail.com", "apollo_status": "NO INTERESADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "BRYAN AGREDO GUTIERREZ", "company": "Colchones cielo azul", "email": "0colchonescieloazul9@gmail.com", "apollo_status": "INTERESADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "SUPERMATERIALES AIM SAHAGUN SAS", "company": "SUPERMATERIALES AIM SAHAGUN", "email": "901905809@glerpmail.com", "apollo_status": "INTERESADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "NELSON MANUEL MARTINEZ SANCHEZ", "company": "ISES MOVILIDAD ELECTRICA", "email": "nm11martinez@gmail.com", "apollo_status": "INTERESADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "OLIVA PABON JIMENEZ", "company": "Salas Tapitex", "email": "olivapabon4@gmail.com", "apollo_status": "INTERESADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}], "AGENDADOS": [{"name": "Sin Nombre", "company": "Surticosm\u00e9ticos", "email": "ingridaristizabal@surticosmeticos.com", "apollo_status": "scheduled", "current_campaign": "", "current_step": "AGENDADO"}, {"name": "Edison Ariel Orrego", "company": "Ariel y sus fantasias", "email": "electronicaayf1@gmail.com", "apollo_status": "AGENDADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "Nelson de Jes\u00fas Su\u00e1rez Zuluaga", "company": "Distribuidora Surtimos", "email": "distribuidorasurtimos@hotmail.com", "apollo_status": "AGENDADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "FERNANDO RODRIGUEZ ORTIZ", "company": "Fernando Rodriguez", "email": "fercho28.175@gmail.com", "apollo_status": "AGENDADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "EDWIN MAYORGA SALAZAR", "company": "Natural power mass", "email": "elypublicidad@hotmail.com", "apollo_status": "AGENDADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "GONZALEZ ENSUNCHO S A S", "company": "VARIEDADES ELENA", "email": "variedadeselena@hotmail.com", "apollo_status": "AGENDADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "PERCAL TEXTILES E INSUMOS SAS", "company": "Percal textiles", "email": "percaltextiles@gmail.com", "apollo_status": "AGENDADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "Jose Aldineber Alfonso Torres", "company": "El Roble", "email": "josealfonso172117@gmail.com", "apollo_status": "AGENDADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "Carlos Andres Yaguara", "company": "Mega Muebles NA", "email": "andresyaguara19@gmail.com", "apollo_status": "AGENDADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "FARLEY COBO QUIGUA", "company": "El dormil\u00f3n", "email": "basecamacobos@hotmail.com", "apollo_status": "AGENDADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "RUSSO TEXTILES E INSUMOS S A S", "company": "Russo textiles e insumos", "email": "russotextiles@gmail.com", "apollo_status": "AGENDADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "JOSE LUIS CHAMIZAS VALENZUELA", "company": "Solo salas chaval", "email": "solosalaschaval@gmail.com", "apollo_status": "AGENDADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "ULPIANO ANDRES CARVAJAL ALVARADO", "company": "La casa del retablon", "email": "lacasadelretablo1999@gmail.com", "apollo_status": "AGENDADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "JOHN JAIRO ARCILA HURTADO", "company": "J Muebles Arcila", "email": "jarcilahurtado@gmail.com", "apollo_status": "AGENDADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "HYD MOTORENS SAS", "company": "HYD MOTORENS", "email": "facturashydmotoren@gmail.com", "apollo_status": "AGENDADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "CITY BIKE COLOMBIA SAS", "company": "CITY BIKE COLOMBIA", "email": "citybikecolombia13@gmail.com", "apollo_status": "AGENDADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}, {"name": "GREEN PLANET SCOOTER STORE SAS", "company": "GREEN PLANET", "email": "carloslopez417@hotmail.com", "apollo_status": "AGENDADO", "current_campaign": "", "current_step": "CLIENTES PLATAM"}], "RECHAZADOS": []}, "recent_activity": [{"contact": "Jeimmy Oviedo", "account": "Aceites Escenciales Aromas Colombianos", "type": "outreach_automatic_email", "status": "scheduled", "sequence": "Sin secuencia", "step": "-", "date": ""}, {"contact": "Carlos Rendon", "account": "Leche Pal Pelo (Grupo Euro Belleza)", "type": "outreach_automatic_email", "status": "scheduled", "sequence": "Sin secuencia", "step": "-", "date": ""}, {"contact": "Nelsy Yanneth Nieto Ramirez", "account": "Sumicolor", "type": "outreach_automatic_email", "status": "scheduled", "sequence": "Sin secuencia", "step": "-", "date": ""}, {"contact": "Jackeline Ortega", "account": "Megapets", "type": "outreach_automatic_email", "status": "scheduled", "sequence": "Sin secuencia", "step": "-", "date": ""}, {"contact": "", "account": "Surticosm\u00e9ticos", "type": "outreach_automatic_email", "status": "scheduled", "sequence": "Sin secuencia", "step": "-", "date": ""}, {"contact": "", "account": "Fuller Pinto", "type": "outreach_automatic_email", "status": "scheduled", "sequence": "Sin secuencia", "step": "-", "date": ""}, {"contact": "", "account": "Compa\u00f1ia Dsierra S.A.S.", "type": "outreach_automatic_email", "status": "scheduled", "sequence": "Sin secuencia", "step": "-", "date": ""}, {"contact": "", "account": "CampoReal", "type": "outreach_automatic_email", "status": "scheduled", "sequence": "Sin secuencia", "step": "-", "date": ""}, {"contact": "", "account": "CARVAL", "type": "outreach_automatic_email", "status": "scheduled", "sequence": "Sin secuencia", "step": "-", "date": ""}, {"contact": "", "account": "Laboratorios Smart S.A.S", "type": "outreach_automatic_email", "status": "scheduled", "sequence": "Sin secuencia", "step": "-", "date": ""}, {"contact": "", "account": "Talsa", "type": "outreach_automatic_email", "status": "scheduled", "sequence": "Sin secuencia", "step": "-", "date": ""}, {"contact": "", "account": "Laboratorios Legrand S.A", "type": "outreach_automatic_email", "status": "scheduled", "sequence": "Sin secuencia", "step": "-", "date": ""}, {"contact": "", "account": "F\u00e1brica de Licores y Alcoholes de Antioquia -EICE-", "type": "outreach_automatic_email", "status": "scheduled", "sequence": "Sin secuencia", "step": "-", "date": ""}, {"contact": "", "account": "Prosalon Distribuciones", "type": "outreach_automatic_email", "status": "scheduled", "sequence": "Sin secuencia", "step": "-", "date": ""}, {"contact": "", "account": "Pintuco", "type": "outreach_automatic_email", "status": "scheduled", "sequence": "Sin secuencia", "step": "-", "date": ""}, {"contact": "", "account": "Alianza Team\u00ae", "type": "outreach_automatic_email", "status": "scheduled", "sequence": "Sin secuencia", "step": "-", "date": ""}, {"contact": "", "account": "Abbott Laboratories - Lafrancol S.A.S", "type": "outreach_automatic_email", "status": "scheduled", "sequence": "Sin secuencia", "step": "-", "date": ""}, {"contact": "", "account": "Central Cervecera de Colombia", "type": "outreach_automatic_email", "status": "scheduled", "sequence": "Sin secuencia", "step": "-", "date": ""}, {"contact": "", "account": "Productos Vicky S.A.S", "type": "outreach_automatic_email", "status": "scheduled", "sequence": "Sin secuencia", "step": "-", "date": ""}, {"contact": "", "account": "Alimentos Polar", "type": "outreach_automatic_email", "status": "scheduled", "sequence": "Sin secuencia", "step": "-", "date": ""}], "counts": {"INTERESADOS": 44, "NUEVOS": 877, "AGENDADOS": 17}};
            renderAll();
        }

        function switchView(viewName) {
            document.querySelectorAll('.view-section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('nav li').forEach(l => l.classList.remove('active'));

            document.getElementById('view-' + viewName).classList.add('active');
            event.currentTarget.classList.add('active');
        }

        function renderAll() {
            const k = rawData.kpis_v2;

            // Group 1: Emails
            document.getElementById('email-total').textContent = k.email.total;
            document.getElementById('email-sent').textContent = k.email.sent;
            document.getElementById('email-replied').textContent = k.email.replied;
            document.getElementById('email-perf').textContent = k.email.total;

            // Group 2: Calls
            document.getElementById('calls-realized').textContent = k.calls.realized;
            document.getElementById('calls-perf').textContent = k.calls.realized;
            document.getElementById('calls-answered').textContent = k.calls.answered;
            document.getElementById('calls-meetings').textContent = k.calls.meetings;

            // Group 3: LinkedIn
            document.getElementById('li-sent').textContent = k.linkedin.sent;
            document.getElementById('li-perf').textContent = k.linkedin.sent;
            document.getElementById('li-replied').textContent = k.linkedin.replied;

            // Group 4: Others
            document.getElementById('other-sent').textContent = k.other.sent;
            document.getElementById('other-perf').textContent = k.other.sent;
            document.getElementById('other-replied').textContent = k.other.replied;

            document.getElementById('topLastSync').textContent = new Date(rawData.timestamp).toLocaleTimeString();

            renderCharts();
            renderMiniActivity();
            renderTable('ALL');
            renderFullActivityFeed();
        }

        function renderCharts() {
            const ctx = document.getElementById('pipelineChart').getContext('2d');
            if (pipelineChart) pipelineChart.destroy();

            const labels = Object.keys(rawData.counts);
            const values = Object.values(rawData.counts);

            pipelineChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Contactos',
                        data: values,
                        backgroundColor: '#6366f1',
                        borderRadius: 10
                    }]
                },
                options: {
                    responsive: true,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: { color: 'rgba(255,255,255,0.05)' },
                            ticks: { color: '#94a3b8' }
                        },
                        x: {
                            grid: { display: false },
                            ticks: { color: '#94a3b8' }
                        }
                    }
                }
            });
        }

        function renderMiniActivity() {
            const feed = document.getElementById('mini-activity');
            feed.innerHTML = '';
            rawData.recent_activity.slice(0, 5).forEach(a => {
                const div = document.createElement('div');
                div.className = 'activity-card';
                div.style.padding = '0.8rem';
                div.style.gap = '1rem';
                div.innerHTML = `
                    <div style="font-size: 1.2rem">${a.type === 'Phone Call' ? 'üìû' : 'üìß'}</div>
                    <div style="flex: 1">
                        <p style="font-weight: 600; font-size: 0.85rem">${a.contact}</p>
                        <p style="font-size: 0.75rem; color: var(--text-dim)">${a.status} - Step ${a.step}</p>
                    </div>
                `;
                feed.appendChild(div);
            });
        }

        function renderTable(filter) {
            const tbody = document.getElementById('fullContactTable');
            tbody.innerHTML = '';

            let pool = [];
            if (filter === 'ALL') {
                Object.values(rawData.pipeline).forEach(list => pool = pool.concat(list));
            } else {
                pool = rawData.pipeline[filter] || [];
            }

            pool.slice(0, 100).forEach(c => {
                const tr = document.createElement('tr');
                const catClass = getCategoryClass(filter === 'ALL' ? findCategory(c) : filter);

                tr.innerHTML = `
                    <td style="font-weight: 600">${c.name}</td>
                    <td style="color: var(--text-dim)">${c.company || '-'}</td>
                    <td style="color: var(--text-dim); font-size: 0.8rem">${c.email}</td>
                    <td style="font-size: 0.8rem">${c.current_campaign || '-'}</td>
                    <td>${c.current_step || '-'}</td>
                    <td><span class="status-pill ${catClass}">${c.apollo_status || 'Sincronizado'}</span></td>
                `;
                tbody.appendChild(tr);
            });
        }

        function findCategory(contact) {
            for (const [cat, list] of Object.entries(rawData.pipeline)) {
                if (list.some(c => c.email === contact.email)) return cat;
            }
            return 'NUEVOS';
        }

        function filterBy(cat) {
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            event.currentTarget.classList.add('active');
            renderTable(cat);
        }

        function getCategoryClass(cat) {
            return 'status-' + cat.toLowerCase();
        }

        function renderFullActivityFeed() {
            const feed = document.getElementById('fullActivityFeed');
            feed.innerHTML = '';
            rawData.recent_activity.forEach(a => {
                const div = document.createElement('div');
                div.className = 'activity-card';
                div.innerHTML = `
                    <div style="width: 50px; height: 50px; background: var(--glass); display: flex; align-items: center; justify-content: center; border-radius: 12px; font-size: 1.5rem">
                        ${a.type === 'Phone Call' ? 'üìû' : 'üìß'}
                    </div>
                    <div style="flex: 1">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem">
                            <h3 style="font-size: 1rem">${a.contact} <span style="font-weight: normal; color: var(--text-dim)">de ${a.account}</span></h3>
                            <span style="font-size: 0.8rem; color: var(--text-dim)">${a.date}</span>
                        </div>
                        <p style="color: var(--text-dim); font-size: 0.9rem">
                            Se registr√≥ un evento de tipo <strong>${a.type}</strong> con estado 
                            <span class="status-pill status-${a.status === 'scheduled' ? 'en_secuencia' : 'interesados'}">${a.status}</span> 
                            en la secuencia <em>${a.sequence}</em> (Paso ${a.step}).
                        </p>
                    </div>
                `;
                feed.appendChild(div);
            });
        }

        function startSync(btn) {
            btn.classList.add('syncing');
            btn.innerHTML = `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="animation: spin 1s linear infinite"><path d="M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"></path></svg> Conectando...`;

            setTimeout(() => {
                btn.classList.remove('syncing');
                btn.innerHTML = `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"></path></svg> Sincronizaci√≥n Completa`;
                loadData();
                setTimeout(() => {
                    btn.innerHTML = `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"></path></svg> Sincronizar Apollo`;
                }, 2000);
            }, 3000);
        }

        function globalSearch(query) {
            query = query.toLowerCase();
            const rows = document.querySelectorAll('#fullContactTable tr');
            rows.forEach(row => {
                const text = row.innerText.toLowerCase();
                row.style.display = text.includes(query) ? '' : 'none';
            });
            if (query.length > 0) switchView('prospects');
        }
    </script>
</body>

</html>